<!DOCTYPE html>

<html>
<head>
  <title>react-super-select.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../stylesheets/docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>

    <ul class="sections">

          <li id="title">
              <div class="annotation">
                  <h1>react-super-select.js</h1>
              </div>
          </li>



        <li id="section-1">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>Â© Scotland Stephenson 2015</p>
<ul>
<li><a href="https://github.com/alsoscotland/react-super-select">github</a></li>
<li><a href="http://alsoscotland.github.io/react-super-select/">documentation</a></li>
<li>freely distributed under the MIT license.</li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lodash'</span>),
    classNames = <span class="hljs-built_in">require</span>(<span class="hljs-string">'classnames'</span>),
    React = <span class="hljs-built_in">require</span>(<span class="hljs-string">'react'</span>);</pre></div></div>

        </li>


        <li id="section-2">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Dependencies</p>
<ul>
<li><a href="https://lodash.com/">Lodash</a></li>
<li><a href="https://www.npmjs.com/package/classnames">classNames</a></li>
<li><a href="https://facebook.github.io/react/index.html">React</a></li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> ReactSuperSelect = React.createClass({</pre></div></div>

        </li>


        <li id="section-3">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="properties">Properties</h2>

            </div>

        </li>


        <li id="section-4">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>  propTypes: {</pre></div></div>

        </li>


        <li id="section-5">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="boolean-options">BOOLEAN OPTIONS</h2>

            </div>

        </li>


        <li id="section-6">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><strong>multiple</strong> (Boolean) <em>optional</em>  - set true for a multi-select control with normal or custom templating.  When using the <strong>tags</strong> display option, this option is redundant</p>

            </div>

            <div class="content"><div class='highlight'><pre>    multiple: React.PropTypes.bool,</pre></div></div>

        </li>


        <li id="section-7">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><strong>searchable</strong> (Boolean) <em>optional</em> - whether or not to show a search bar in the dropdown area which offers text-based filtering of the options-set (by label key)</p>

            </div>

            <div class="content"><div class='highlight'><pre>    searchable: React.PropTypes.bool,</pre></div></div>

        </li>


        <li id="section-8">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><strong>tags</strong> (Boolean) <em>optional</em> - Whether or not to display your chosen multi-select values as tags.  (When set, there is no need to set the <strong>multiple</strong> option)</p>

            </div>

            <div class="content"><div class='highlight'><pre>    tags: React.PropTypes.bool,</pre></div></div>

        </li>


        <li id="section-9">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="css-class-custom-styling-support-options">CSS CLASS / CUSTOM STYLING SUPPORT OPTIONS</h2>

            </div>

        </li>


        <li id="section-10">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><strong>customClassName</strong> (String) <em>optional</em> - this string value will be added as a css class to the control&#39;s main wrapping element.  You should be able to overide all styling with one point of css specificity by leading your rules with</p>
<pre><code class="lang-css">.r-ss-wrap.{customClassName}
</code></pre>

            </div>

            <div class="content"><div class='highlight'><pre>    customClassName: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-11">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>customGroupHeadingClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>groupBy</strong> option.  Will add a custom css class to the group headings which are rendered into the dropdown</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customGroupHeadingClass: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-12">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><strong>customSearchIconClass</strong> (String) <em>optional</em> - This class name will be added to the icon in the search-filtering bar (when <strong>searchable</strong> is true).  Allowing you to override the default search icon (default: a magnifying glass)</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customSearchIconClass: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-13">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p><strong>customLoaderClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>ajaxDataSource</strong> option.  A css class which will be added to the loading icon (default: an animated gif spinner as base64 background image in css) allowing css overrides.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customLoaderClass: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-14">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><strong>customTagClass</strong> (String) <em>optional</em> - Used in conjunction with the <strong>tags</strong> option.  A css class which will be added to wrapper of a selection displayed as a tag. You should be able to overide all tag styling with one point of css specificity by leading your rules with</p>
<pre><code class="lang-css"> .r-ss-tag.{customTagClass}
</code></pre>

            </div>

            <div class="content"><div class='highlight'><pre>    customTagClass: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-15">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="main-change-handler">MAIN CHANGE HANDLER</h2>

            </div>

        </li>


        <li id="section-16">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><strong>onChange</strong> (Function) <em>required</em> - This is the main callback handler for the control.  When a user makes selection(s) the selected option, or when <strong>multiple</strong> or <strong>tags</strong>, an array of selected values (object from the dataSource collection) will be passed to this handler function.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    onChange: React.PropTypes.func.isRequired,</pre></div></div>

        </li>


        <li id="section-17">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h2 id="option-data-related-props">OPTION DATA-RELATED PROPS</h2>

            </div>

        </li>


        <li id="section-18">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>ajaxDataSource</strong> (Function) (<em>optional - but <strong>dataSource</strong> must be supplied if undefined</em>) - Your select dropdown&#39;s data may be fetched via ajax if you provide a function as the value for this option.
The function takes no arguments, but it must return a <strong>promise</strong> object. (i.e. an object with a then function).  The promise must resolve with an array of objects (a collection) as described by the <strong>dataSource</strong> option documentation. Or a single option object.  The <strong>dataSource</strong> option should be left undefined when using this option.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    ajaxDataSource: React.PropTypes.func,</pre></div></div>

        </li>


        <li id="section-19">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p><strong>dataSource</strong> (An Array of Objects, i.e. a collection) (<em>optional - but <strong>ajaxDataSource</strong> must be supplied if undefined</em>) - The dataSource option provides the data for your options dropdown. Each option in the collection must have:</p>
<ul>
<li>a unique value in the key set by the <strong>optionValueKey</strong> or the default of <strong>id</strong></li>
<li>a value in the key set by the <strong>optionLabelKey</strong> or the default of <strong>name</strong></li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>    dataSource: React.PropTypes.arrayOf(React.PropTypes.object),</pre></div></div>

        </li>


        <li id="section-20">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><strong>optionLabelKey</strong> (String) (<em>optional - will use &#39;name&#39; key if undefined</em>) - This value represents the key in each option object in your <strong>dataSource</strong> collection which represents the value you would like displayed for each option.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    optionLabelKey: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-21">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><strong>optionValueKey</strong> (String) (<em>optional - will use &#39;id&#39; key if undefined</em>) - This value represents the key in each option object in your <strong>dataSource</strong> collection which represents the value that uniquely identifies that option across the dataSource collection.  Think of it in terms of the value attribute of a traditional html <code>&lt;select&gt;</code> element</p>

            </div>

            <div class="content"><div class='highlight'><pre>    optionValueKey: React.PropTypes.string, <span class="hljs-comment">// value this maps to should be unique in data source</span></pre></div></div>

        </li>


        <li id="section-22">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><strong>pageFetch</strong> (Function) <em>optional</em> - Additional pages of data can be fetched  via ajax if you provide a function as the value for this option.  The function takes one argument, the current data array.
It must return a <strong>promise</strong> object. (i.e. an object with a then function).  The promise <strong>must resolve with an object with two properties</strong>.</p>
<ul>
<li><strong>collection</strong> (Array of Objects) the array of data to be used as described by the <strong>dataSource</strong> option documentation.  The array should be the collection value passed into this function augmented with the data from the new page.</li>
<li><strong>complete</strong> (Boolean) indicates whether all pages have been fetched (i.e. do not fetch more pages)
The pageFetch function will be called based upon the user&#39;s scroll position in the dropdown.  <em>It will not be called when loading ajax data, or when filtering results in a searchable dropdown</em></li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>    pageFetch: React.PropTypes.func,</pre></div></div>

        </li>


        <li id="section-23">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2 id="grouping-functionality">GROUPING FUNCTIONALITY</h2>

            </div>

        </li>


        <li id="section-24">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><strong>groupBy</strong> (String|Object|Function) <em>optional</em> - Allows you to sort your dropdown options into groups by leveraging Lodash&#39;s groupBy function.  Please reference <a href="https://lodash.com/docs#groupBy">Lodash</a> documentation for behavior of <em>groupBy</em> when passed different argument types</p>

            </div>

            <div class="content"><div class='highlight'><pre>    groupBy: React.PropTypes.oneOfType([
            React.PropTypes.string,
            React.PropTypes.func,
            React.PropTypes.object
          ]),</pre></div></div>

        </li>


        <li id="section-25">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><strong>customGroupHeadingTemplateFunction</strong> (Function) <em>optional</em> (Used in conjunction with the <strong>groupBy</strong> option)- This function provides custom templating capability for your dropdown heading options.  The function should accept the value returned as each group&#39;s object key (returned by the call of Lodash&#39;s groupBy when passed the value of your <strong>groupBy</strong> option)</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customGroupHeadingTemplateFunction: React.PropTypes.func,</pre></div></div>

        </li>


        <li id="section-26">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h2 id="rendering-option-iterator-functions">RENDERING (OPTION ITERATOR) FUNCTIONS</h2>

            </div>

        </li>


        <li id="section-27">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><strong>customFilterFunction</strong> (Function) <em>optional</em> - Used in conjunction with the <strong>searchable</strong> options.  The function provided for this option will serve as a replacement of the default search filter function.
(A default lowercase string comparison for text.  Matches the <strong>optionLabelKey</strong> value to the text entered into the dropdown&#39;s search field).  The function is passed as the second arg to <a href="https://lodash.com/docs#filter">Lodash&#39;s filter function</a> and is along with your <strong>dataSource</strong> as the first arg.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customFilterFunction: React.PropTypes.func,</pre></div></div>

        </li>


        <li id="section-28">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><strong>customOptionTemplateFunction</strong> (Function) <em>optional</em> - This function provides custom templating capability for your dropdown options and the display of selected values.  The function should accept a single option object from your <strong>dataSource</strong> collection and return your desired markup based on that object&#39;s properties.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    customOptionTemplateFunction: React.PropTypes.func,</pre></div></div>

        </li>


        <li id="section-29">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h2 id="localization-strings">LOCALIZATION STRINGS</h2>

            </div>

        </li>


        <li id="section-30">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p><strong>noResultsString</strong> (String) <em>optional</em> - A string value which will be displayed when your dropdown shows no results.  (i.e. dataSource is an empty collection, or ajaxDataSource returns an empty collection)</p>

            </div>

            <div class="content"><div class='highlight'><pre>    noResultsString: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-31">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><strong>placeholder</strong> (String) <em>optional</em> - This string value will be displayed in the main display area of your control before a user has selected any values</p>

            </div>

            <div class="content"><div class='highlight'><pre>    placeholder: React.PropTypes.string,</pre></div></div>

        </li>


        <li id="section-32">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p><strong>searchPlaceholder</strong> (String) <em>optional</em> - (Used in conjunction with the <strong>searchable</strong> option) This string will be shown in the dropdown area&#39;s searchfield when a user has not entered any characters.</p>

            </div>

            <div class="content"><div class='highlight'><pre>    searchPlaceholder: React.PropTypes.string
  },</pre></div></div>

        </li>


        <li id="section-33">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h2 id="constants">CONSTANTS</h2>

            </div>

        </li>


        <li id="section-34">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>represents the focusedID state variable value for the search field of a <strong>searchable</strong> control.</p>

            </div>

            <div class="content"><div class='highlight'><pre>  SEARCH_FOCUS_ID: -<span class="hljs-number">1</span>,</pre></div></div>

        </li>


        <li id="section-35">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h2 id="state-variables">STATE VARIABLES</h2>

            </div>

        </li>


        <li id="section-36">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>  getInitialState: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> {</pre></div></div>

        </li>


        <li id="section-37">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><strong>data</strong> (Array of Objects) the data source array used to map to option elements</p>

            </div>

            <div class="content"><div class='highlight'><pre>      data: <span class="hljs-keyword">this</span>.props.dataSource,</pre></div></div>

        </li>


        <li id="section-38">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p><strong>isOpen</strong> (Boolean) - whether the dropdown is open</p>

            </div>

            <div class="content"><div class='highlight'><pre>      isOpen: <span class="hljs-literal">false</span>,</pre></div></div>

        </li>


        <li id="section-39">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p><strong>focusedId</strong> (Number) - used to track keyboard focus for accessibility</p>

            </div>

            <div class="content"><div class='highlight'><pre>      focusedId: <span class="hljs-literal">undefined</span>,</pre></div></div>

        </li>


        <li id="section-40">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p><strong>labelKey</strong> (String) - the option object key that will be used to identify the value used as an option&#39;s label</p>

            </div>

            <div class="content"><div class='highlight'><pre>      labelKey: <span class="hljs-keyword">this</span>.props.optionLabelKey || <span class="hljs-string">'name'</span>,</pre></div></div>

        </li>


        <li id="section-41">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p><strong>lastOptionId</strong> (Number) - Used in keyboard navigation to focus the last available option</p>

            </div>

            <div class="content"><div class='highlight'><pre>      lastOptionId: (_.isArray(<span class="hljs-keyword">this</span>.props.dataSource) &amp;&amp; (<span class="hljs-keyword">this</span>.props.dataSource.length &gt; <span class="hljs-number">0</span>)) ? <span class="hljs-keyword">this</span>.props.dataSource.length - <span class="hljs-number">1</span> : <span class="hljs-literal">undefined</span>,</pre></div></div>

        </li>


        <li id="section-42">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p><strong>searchString</strong> (String) - When the <strong>searchable</strong> option is true, this is the user-entered value in the search field used for data filtering based on the label key&#39;s value</p>

            </div>

            <div class="content"><div class='highlight'><pre>      searchString: <span class="hljs-literal">undefined</span>,</pre></div></div>

        </li>


        <li id="section-43">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><strong>value</strong> (Array) - An array that holds the currently selected option(s)</p>

            </div>

            <div class="content"><div class='highlight'><pre>      value: [],</pre></div></div>

        </li>


        <li id="section-44">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p><strong>valueKey</strong> (String) - the option object key that will be used to identify the value used as an option&#39;s value property (values must be unique across data source)</p>

            </div>

            <div class="content"><div class='highlight'><pre>      valueKey: <span class="hljs-keyword">this</span>.props.optionValueKey || <span class="hljs-string">'id'</span>
    };
  },</pre></div></div>

        </li>


        <li id="section-45">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <h2 id="keymap">KEYMAP</h2>

            </div>

        </li>


        <li id="section-46">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>text based lookup map for keyboard navigation keys and their corresponding &#39;which&#39; keycode values</p>

            </div>

            <div class="content"><div class='highlight'><pre>  keymap: {
    <span class="hljs-string">'down'</span>: <span class="hljs-number">40</span>,
    <span class="hljs-string">'end'</span>: <span class="hljs-number">35</span>, <span class="hljs-comment">// goto last option ?</span>
    <span class="hljs-string">'enter'</span>: <span class="hljs-number">13</span>,
    <span class="hljs-string">'esc'</span>: <span class="hljs-number">27</span>,
    <span class="hljs-string">'home'</span>: <span class="hljs-number">36</span>, <span class="hljs-comment">// go to first option ?</span>
    <span class="hljs-string">'left'</span>: <span class="hljs-number">37</span>,
    <span class="hljs-string">'right'</span>: <span class="hljs-number">39</span>,
    <span class="hljs-string">'space'</span>: <span class="hljs-number">32</span>,
    <span class="hljs-string">'tab'</span>: <span class="hljs-number">9</span>,
    <span class="hljs-string">'up'</span>: <span class="hljs-number">38</span>
  },</pre></div></div>

        </li>


        <li id="section-47">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>If parent page updates the data source, reset the control with some defaults and the new data source.</p>

            </div>

            <div class="content"><div class='highlight'><pre>  componentWillReceiveProps: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(nextProps)</span> {</span>
    <span class="hljs-keyword">if</span> (!_.isEqual(<span class="hljs-keyword">this</span>.props.dataSource, nextProps.dataSource)) {
      <span class="hljs-keyword">this</span>.setState({
        data: nextProps.dataSource,
        focusedId: <span class="hljs-literal">undefined</span>,
        pageFetchingComplete: <span class="hljs-literal">undefined</span>,
        labelKey: nextProps.optionLabelKey || <span class="hljs-string">'name'</span>,
        lastOptionId: (_.isArray(nextProps.dataSource) &amp;&amp; (nextProps.dataSource.length &gt; <span class="hljs-number">0</span>)) ? nextProps.dataSource.length - <span class="hljs-number">1</span> : <span class="hljs-literal">undefined</span>,
        valueKey: nextProps.optionValueKey || <span class="hljs-string">'id'</span>
      });
    }
  },</pre></div></div>

        </li>


        <li id="section-48">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Update focused element after re-render</p>

            </div>

            <div class="content"><div class='highlight'><pre>  componentDidUpdate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(prevProps, prevState)</span> {</span>
    <span class="hljs-keyword">if</span> (prevState.focusedId === <span class="hljs-keyword">this</span>.state.focusedId) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>._focusCurrentFocusedId();
  },</pre></div></div>

        </li>


        <li id="section-49">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>main render method</p>

            </div>

            <div class="content"><div class='highlight'><pre>  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> dropdownContent = <span class="hljs-keyword">this</span>._getDropdownContent(),
        valueDisplayClass,
        triggerDisplayContent,
        triggerClasses,
        caratClass = classNames(<span class="hljs-string">'carat'</span>, {
          <span class="hljs-string">'down'</span>: !<span class="hljs-keyword">this</span>.state.isOpen,
          <span class="hljs-string">'up'</span>: <span class="hljs-keyword">this</span>.state.isOpen
        }),
        wrapClasses;

    wrapClasses = classNames(<span class="hljs-string">"r-ss-wrap"</span>, <span class="hljs-keyword">this</span>.props.customClassName, {
      <span class="hljs-string">'r-ss-expanded'</span>: <span class="hljs-keyword">this</span>.state.isOpen
    });

    triggerClasses = classNames(<span class="hljs-string">'r-ss-trigger'</span>, {
      <span class="hljs-string">'r-ss-open'</span>: <span class="hljs-keyword">this</span>.state.isOpen
    });
    triggerDisplayContent = <span class="hljs-keyword">this</span>.state.value.length ? <span class="hljs-keyword">this</span>._generateValueDiplay() : <span class="hljs-keyword">this</span>.props.placeholder;
    valueDisplayClass = classNames(<span class="hljs-string">'r-ss-value-display'</span>, {
      <span class="hljs-string">'r-ss-placeholder'</span>: <span class="hljs-keyword">this</span>.state.value.length &lt; <span class="hljs-number">1</span>,
    });

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"rssControl"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{wrapClasses}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"triggerDiv"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{triggerClasses}</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">{this.toggleDropdown}</span> <span class="hljs-attribute">onKeyUp</span>=<span class="hljs-value">{this._handleKeyUp}</span> <span class="hljs-attribute">aria-haspopup</span>=<span class="hljs-value">"true"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"triggerAnchor"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-mock-input"</span> <span class="hljs-attribute">tabIndex</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">aria-label</span>=<span class="hljs-value">{this.props.placeholder}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{valueDisplayClass}</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"valueDisplay"</span>&gt;</span>{triggerDisplayContent}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"carat"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{caratClass}</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        {dropdownContent}
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-50">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>toggles the open-state of the dropdown</p>

            </div>

            <div class="content"><div class='highlight'><pre>  toggleDropdown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-string">'isOpen'</span>: !<span class="hljs-keyword">this</span>.state.isOpen
    });
  },</pre></div></div>

        </li>


        <li id="section-51">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>close the dropdown and
resets focus to main control trigger</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _closeOnKeypress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>.setState({
        isOpen: <span class="hljs-literal">false</span>,
        focusedId: <span class="hljs-literal">undefined</span>
      }, <span class="hljs-keyword">this</span>._focusTrigger);
    }
  },</pre></div></div>

        </li>


        <li id="section-52">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>used if no <strong>customFilterFunction</strong> provided for filtering the data options shown in a <strong>searchable</strong> control,
runs a lowercase string comparison with the <strong>searchString</strong> and the value corresponding to an option&#39;s <strong>optionLabelKey</strong></p>

            </div>

            <div class="content"><div class='highlight'><pre>  _defaultSearchFilter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(option)</span> {</span>
    <span class="hljs-keyword">var</span> search = <span class="hljs-keyword">this</span>.state.searchString.toLowerCase();
    <span class="hljs-keyword">if</span> (!_.isString(option[<span class="hljs-keyword">this</span>.state.labelKey])) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> option[<span class="hljs-keyword">this</span>.state.labelKey].toLowerCase().indexOf(search) &gt; -<span class="hljs-number">1</span>;
  },</pre></div></div>

        </li>


        <li id="section-53">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>fetch data source via ajax if <strong>ajaxDataSource</strong> function provided</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _fetchDataViaAjax: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.props.ajaxDataSource().then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(optionDataFromAjax)</span> {</span>
      <span class="hljs-keyword">var</span> data = _.isArray(optionDataFromAjax) ? optionDataFromAjax : [];
      self.setState({
        data: data
      });
    });
  },</pre></div></div>

        </li>


        <li id="section-54">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>fetch the next page of options data if <strong>pageFetch</strong> function provided,
called onMouseMove if scroll position in dropdown exceeds threshold</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _fetchNextPage: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
        currentData = <span class="hljs-keyword">this</span>.state.data || [];
    <span class="hljs-keyword">this</span>.props.pageFetch(currentData).then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dataFromPageFetch)</span> {</span>
      dataFromPageFetch = dataFromPageFetch || {};
      <span class="hljs-keyword">var</span> data = _.isArray(dataFromPageFetch.collection) ? dataFromPageFetch.collection: [];
      self.setState({
        pageFetchingComplete: dataFromPageFetch.complete,
        isFetchingPage: <span class="hljs-literal">false</span>,
        data: data
      });
    });
  },</pre></div></div>

        </li>


        <li id="section-55">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>choose the appropriate search filter function and run the filter against the options data</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _filterDataBySearchString: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {</span>
    <span class="hljs-keyword">var</span> filterFunction = _.isFunction(<span class="hljs-keyword">this</span>.props.customFilterFunction) ? <span class="hljs-keyword">this</span>.props.customFilterFunction : <span class="hljs-keyword">this</span>._defaultSearchFilter;
    <span class="hljs-keyword">return</span> _.filter(data, filterFunction);
  },</pre></div></div>

        </li>


        <li id="section-56">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>used when selecting values, returns an array of full option-data objects which contain any single value or any one of an array of values passed in</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _findArrayOfOptionDataObjectsByValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
        valuesArray = _.isArray(value) ? _.pluck(value, <span class="hljs-keyword">this</span>.state.valueKey) : [value];
    <span class="hljs-keyword">return</span> _.reject(<span class="hljs-keyword">this</span>.state.data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>
      <span class="hljs-keyword">return</span> !_.contains(valuesArray, item[self.state.valueKey]);
    });
  },</pre></div></div>

        </li>


        <li id="section-57">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>determine whether to focus a option value in the DOM, or the search field</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _focusCurrentFocusedId: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.focusedId &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>._focusSearch();
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">this</span>._focusDOMOption();
  },</pre></div></div>

        </li>


        <li id="section-58">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>focus the DOM option locatable by the current focusedId</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _focusDOMOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> optionRef = <span class="hljs-keyword">this</span>._getFocusedOptionKey();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs[optionRef]) {
      <span class="hljs-keyword">if</span> (_.isFunction(<span class="hljs-keyword">this</span>.refs[optionRef].getDOMNode().focus)) {
        <span class="hljs-keyword">this</span>.refs[optionRef].getDOMNode().focus();
      }
    }
  },</pre></div></div>

        </li>


        <li id="section-59">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>focus the dropdown&#39;s search field if it exists</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _focusSearch: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs.searchInput) {
      <span class="hljs-keyword">this</span>.refs.searchInput.getDOMNode().focus();
    }
  },</pre></div></div>

        </li>


        <li id="section-60">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>focus the main trigger element of the control</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _focusTrigger: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs.triggerAnchor) {
      <span class="hljs-keyword">this</span>.refs.triggerAnchor.getDOMNode().focus();
    }
  },</pre></div></div>

        </li>


        <li id="section-61">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>choose whether to calculate the display values normally, or as tags</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _generateValueDiplay: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.props.tags) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getNormalDisplayMarkup();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._getTagsDisplayMarkup();
    }
  },</pre></div></div>

        </li>


        <li id="section-62">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>calculate and return the renderable data source object or array, factoring in the search filtering, and any grouping functionality</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getDataSource: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> data = _.isArray(<span class="hljs-keyword">this</span>.state.data) ? <span class="hljs-keyword">this</span>.state.data : [];
    <span class="hljs-keyword">if</span> (_.isString(<span class="hljs-keyword">this</span>.state.searchString)) {
      data = <span class="hljs-keyword">this</span>._filterDataBySearchString(data);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.groupBy) {
      data = _.groupBy(data, <span class="hljs-keyword">this</span>.props.groupBy);
    }

    <span class="hljs-keyword">return</span> data;
  },</pre></div></div>

        </li>


        <li id="section-63">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>determine and render the dropdown content
will trigger the <strong>ajaxDataSource</strong> fetch (and show loader) if needed</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getDropdownContent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">var</span> dropdownContent,
        searchContent = <span class="hljs-keyword">this</span>._getSearchContent(),
        mouseMoveHandler,
        pagingLi;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._needsAjaxFetch()) {
      <span class="hljs-keyword">this</span>._fetchDataViaAjax();
      dropdownContent = <span class="hljs-keyword">this</span>._getLoadingMarkup();
    } <span class="hljs-keyword">else</span> {
      dropdownContent = <span class="hljs-keyword">this</span>._getOptionsMarkup();
    }

    mouseMoveHandler = (<span class="hljs-keyword">this</span>.props.pageFetch) ? <span class="hljs-keyword">this</span>._onMouseMove : <span class="hljs-literal">null</span>;
    pagingLi = <span class="hljs-keyword">this</span>.state.isFetchingPage ? <span class="hljs-keyword">this</span>._getPagingLi() : <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"dropdownContent"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-dropdown"</span> <span class="hljs-attribute">onKeyUp</span>=<span class="hljs-value">{this._handleKeyUp}</span>&gt;</span>
        {searchContent}
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"scrollWrap"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-options-wrap"</span> <span class="hljs-attribute">onMouseMove</span>=<span class="hljs-value">{mouseMoveHandler}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-dropdown-options"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"dropdownOptionsList"</span> <span class="hljs-attribute">aria-hidden</span>=<span class="hljs-value">{!this.state.isOpen}</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"menubar"</span>&gt;</span>
            {dropdownContent}
          <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
          {pagingLi}
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    );
  },

</span></pre></div></div>

        </li>


        <li id="section-64">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>build the string used as a React component ref for each focusable option</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getFocusedOptionKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'option_'</span> + <span class="hljs-keyword">this</span>.state.focusedId;
  },</pre></div></div>

        </li>


        <li id="section-65">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>render a group heading, used if <strong>groupBy</strong> option is provided.
renders a non-focusable list item for an option group heading</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getGroupHeadingMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(heading)</span> {</span>
    <span class="hljs-keyword">if</span> (!heading) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">var</span> headingClasses = classNames(<span class="hljs-string">"r-ss-option-group-heading"</span>, <span class="hljs-keyword">this</span>.props.customGroupHeadingClass),
        headingKey = <span class="hljs-string">"heading_"</span> + heading,
        headingMarkup = <span class="hljs-keyword">this</span>.props.customGroupHeadingTemplateFunction ? <span class="hljs-keyword">this</span>.props.customGroupHeadingTemplateFunction(heading) : heading;

    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">tabIndex</span>=<span class="hljs-value">"-1"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{headingClasses}</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">{headingKey}</span> <span class="hljs-attribute">role</span>=<span class="hljs-value">"separator"</span>&gt;</span>
        {headingMarkup}
      <span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-66">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>render the content shown if no options are available</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getNoResultsMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> noResultsString = <span class="hljs-keyword">this</span>.props.noResultsString ? <span class="hljs-keyword">this</span>.props.noResultsString : <span class="hljs-string">'No Results Available'</span>;
    <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-dropdown-option"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">i</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"noResults"</span>&gt;</span>{noResultsString}<span class="hljs-tag">&lt;/<span class="hljs-title">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-67">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>render the selected options into the trigger element using the default (non-tags) behavior</p>
<ul>
<li>choose whether to render the default template or a provided <strong>customOptionTemplateFunction</strong></li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>  _getNormalDisplayMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> markup = _.map(<span class="hljs-keyword">this</span>.state.value, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
      <span class="hljs-keyword">if</span> (self.props.customOptionTemplateFunction) {
        <span class="hljs-keyword">return</span> self.props.customOptionTemplateFunction(value);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> value[self.state.labelKey];
      }
    });
    <span class="hljs-keyword">return</span> markup;
  },</pre></div></div>

        </li>


        <li id="section-68">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>render a loading span (spinner gif), with <strong>customLoaderClass</strong> if provided</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getLoadingMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> loaderClasses = <span class="hljs-keyword">this</span>.props.customLoaderClass ? <span class="hljs-string">"r-ss-loader "</span> + <span class="hljs-keyword">this</span>.props.customLoaderClass : <span class="hljs-string">"r-ss-loader"</span>;
    <span class="hljs-keyword">return</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"loader"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{loaderClasses}</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-69">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>render the data source as options,</p>
<ul>
<li>when <strong>groupBy</strong> is set, data will be a javascript object.  Run with group heading renders in that case</li>
<li>must track options count to maintain a single focusable index mapping across multiple groups of options</li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>  _getOptionsMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>._getDataSource(),
        self = <span class="hljs-keyword">this</span>,
        options = [],
        optionsCount = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (!_.isArray(data)) {
      _.forIn(data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(groupedOptions, heading)</span> {</span>
        options.push(self._getGroupHeadingMarkup(heading));
        options = options.concat(self._getTemplatedOptions(groupedOptions, optionsCount));
        optionsCount = optionsCount + groupedOptions.length;
      });
    } <span class="hljs-keyword">else</span> {
      options = <span class="hljs-keyword">this</span>._getTemplatedOptions(data);
    }

    <span class="hljs-keyword">return</span> options;
  },</pre></div></div>

        </li>


        <li id="section-70">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>render a list item with a loading indicator.  shown while <strong>pageFetch</strong> function runs</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getPagingLi: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"page_loading"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-page-fetch-indicator"</span> <span class="hljs-attribute">tabIndex</span>=<span class="hljs-value">"-1"</span>&gt;</span>
            {this._getLoadingMarkup()}
          <span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-71">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>render a search input bar with a search icon</p>
<ul>
<li>add localized <strong>searchPlaceholder</strong> if provided</li>
<li>add <strong>customIconClass</strong> if provided</li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>  _getSearchContent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.props.searchable) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">var</span> magnifierClass = <span class="hljs-keyword">this</span>.props.customSearchIconClass ? <span class="hljs-keyword">this</span>.props.customSearchIconClass : <span class="hljs-string">"r-ss-magnifier"</span>;

    <span class="hljs-keyword">return</span>(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-search-wrap"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-search-inner"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"searchInput"</span> <span class="hljs-attribute">placeholder</span>=<span class="hljs-value">{this.props.searchPlaceholder}</span> <span class="hljs-attribute">onKeyUp</span>=<span class="hljs-value">{this._handleSearch}</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">{this._setFocusIdToSearch}</span> <span class="hljs-attribute">defaultValue</span>=<span class="hljs-value">{this.state.searchString}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">i</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{magnifierClass}</span>&gt;</span>search<span class="hljs-tag">&lt;/<span class="hljs-title">i</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    );
  },

</span></pre></div></div>

        </li>


        <li id="section-72">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>iterate over selected values and build tags markup for selected options display</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _getTagsDisplayMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> markup = _.map(<span class="hljs-keyword">this</span>.state.value, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
      <span class="hljs-keyword">return</span> self._getTagMarkup(value);
    });
    <span class="hljs-keyword">return</span> markup;
  },</pre></div></div>

        </li>


        <li id="section-73">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>render a tag for an individual selected value</p>
<ul>
<li>add <strong>customTagClass</strong> if provided</li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>  _getTagMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
    <span class="hljs-keyword">var</span> label = value[<span class="hljs-keyword">this</span>.state.labelKey],
        displayValue = value[<span class="hljs-keyword">this</span>.state.valueKey],
        tagKey = <span class="hljs-string">'tag_'</span> + displayValue,
        buttonName = <span class="hljs-string">"RemoveTag_"</span> + displayValue,
        tagWrapClass = <span class="hljs-keyword">this</span>.props.customTagClass ? <span class="hljs-string">"r-ss-tag "</span> + <span class="hljs-keyword">this</span>.props.customTagClass : <span class="hljs-string">"r-ss-tag"</span>;

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{tagWrapClass}</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">{tagKey}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-tag-label"</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">{buttonName}</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"r-ss-tag-remove"</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">{this._removeTagClick.bind(null,</span> <span class="hljs-attribute">value</span>)} <span class="hljs-attribute">onKeyUp</span>=<span class="hljs-value">{this._removeTagKeyPress.bind(null,</span> <span class="hljs-attribute">value</span>)}&gt;</span>X<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
  },

</span></pre></div></div>

        </li>


        <li id="section-74">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>choose a rendering function, either <strong>customOptionTemplateFunction</strong> if provided, or default</p>
<ul>
<li>render no results markup if no options result from map calls</li>
</ul>

            </div>

            <div class="content"><div class='highlight'><pre>  _getTemplatedOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, indexStart)</span> {</span>
    indexStart = indexStart || <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> options = _.isFunction(<span class="hljs-keyword">this</span>.props.customOptionTemplateFunction) ? <span class="hljs-keyword">this</span>._mapDataToCustomTemplateMarkup(data, indexStart) : <span class="hljs-keyword">this</span>._mapDataToDefaultTemplateMarkup(data, indexStart);

    <span class="hljs-keyword">if</span> (options.length === <span class="hljs-number">0</span>) {
      options = <span class="hljs-keyword">this</span>._getNoResultsMarkup();
    }

    <span class="hljs-keyword">return</span> options;
  },</pre></div></div>

        </li>


        <li id="section-75">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>main keyup binding map for keyboard navigation and selection</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _handleKeyUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
    event.preventDefault();
    event.stopPropagation();

    <span class="hljs-keyword">switch</span>(event.which) {
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.down:
        <span class="hljs-keyword">this</span>._onDownKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.end:
        <span class="hljs-keyword">this</span>._onEndKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.enter:
        <span class="hljs-keyword">if</span> (event.shiftKey) {
          <span class="hljs-keyword">this</span>._handleShiftKeyUpSelect();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>._onEnterKey(event);
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.esc:
        <span class="hljs-keyword">this</span>._onEscKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.home:
        <span class="hljs-keyword">this</span>._onHomeKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.left: <span class="hljs-comment">// delegate to up handler</span>
        <span class="hljs-keyword">this</span>._onUpKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.right: <span class="hljs-comment">// delegate to down handler</span>
        <span class="hljs-keyword">this</span>._onDownKey();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.space:
        <span class="hljs-keyword">if</span> (event.shiftKey) {
          <span class="hljs-keyword">this</span>._handleShiftKeyUpSelect();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>._onEnterKey(event); <span class="hljs-comment">// delegate to enter</span>
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.tab: <span class="hljs-comment">// delegate to down handler if not at top level of UI DOM</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.focusedId !== <span class="hljs-string">'undefined'</span>) {
          <span class="hljs-keyword">this</span>._onDownKey();
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keymap.up:
        <span class="hljs-keyword">this</span>._onUpKey();
        <span class="hljs-keyword">break</span>;
    }
  },</pre></div></div>

        </li>


        <li id="section-76">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>handler for searchInput&#39;s keyUp event</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _handleSearch: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
    <span class="hljs-keyword">var</span> searchString = event.target.value;
    <span class="hljs-keyword">this</span>._handleSearchDebounced.call(<span class="hljs-keyword">this</span>, searchString);
    <span class="hljs-keyword">this</span>._handleKeyUp(event);
  },</pre></div></div>

        </li>


        <li id="section-77">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>debounced handler for searchInput&#39;s keyUp event, reduces # of times the control re-renders</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _handleSearchDebounced: _.debounce(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(search)</span> {</span>
    <span class="hljs-keyword">this</span>.setState({
      searchString: search
    });
  }, <span class="hljs-number">300</span>),</pre></div></div>

        </li>


        <li id="section-78">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>handle selecting a range of options at once when shift-key is depressed during click</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _handleShiftSelect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value, event)</span> {</span>
    <span class="hljs-keyword">var</span> optionIndex = <span class="hljs-built_in">parseInt</span>(event.currentTarget.getAttribute(<span class="hljs-string">'data-option-index'</span>), <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (optionIndex === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">this</span>._selectAllFromOptionRefToLastSelected(optionIndex);
  },</pre></div></div>

        </li>


        <li id="section-79">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>handle selecting a range of options at once when shift-key is depressed during keyboard selection</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _handleShiftKeyUpSelect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> focusedOptionKey = <span class="hljs-keyword">this</span>._getFocusedOptionKey();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs[focusedOptionKey]) {
      <span class="hljs-keyword">this</span>._selectAllFromOptionRefToLastSelected(<span class="hljs-keyword">this</span>.refs[focusedOptionKey].props[<span class="hljs-string">'data-option-index'</span>]);
    }
  },</pre></div></div>

        </li>


        <li id="section-80">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>return the boolean used to determine whether an option should have the &#39;r-ss-selected&#39; class</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _isCurrentlySelected: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dataItem)</span> {</span>
    <span class="hljs-keyword">if</span> (!_.isArray(<span class="hljs-keyword">this</span>.state.value)) {
      <span class="hljs-keyword">return</span> _.isEqual(<span class="hljs-keyword">this</span>.state.value, dataItem);
    }
    <span class="hljs-keyword">return</span> !!(_.findWhere(<span class="hljs-keyword">this</span>.state.value, dataItem));
  },</pre></div></div>

        </li>


        <li id="section-81">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>tags and mutiple both provide multi-select behavior.  Returns true if either is set to true</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _isMultiSelect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.multiple || <span class="hljs-keyword">this</span>.props.tags;
  },</pre></div></div>

        </li>


        <li id="section-82">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>render option list-items based on a provided <strong>customOptionTemplateFunction</strong> function</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _mapDataToCustomTemplateMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, indexStart)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">return</span> _.map(data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dataOption, index)</span> {</span>
      index = indexStart + index;

      <span class="hljs-keyword">var</span> itemKey = <span class="hljs-string">"drop_li_"</span> + dataOption[self.state.valueKey],
          indexRef = <span class="hljs-string">'option_'</span> + index,
          customOptionMarkup = self.props.customOptionTemplateFunction(dataOption),
          classes = classNames(<span class="hljs-string">'r-ss-dropdown-option'</span>, {
            <span class="hljs-string">'r-ss-selected'</span>: self._isCurrentlySelected(dataOption)
          });

      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">{indexRef}</span> <span class="hljs-attribute">tabIndex</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">data-option-index</span>=<span class="hljs-value">{index}</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{classes}</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">{itemKey}</span> <span class="hljs-attribute">data-option-value</span>=<span class="hljs-value">{dataOption[self.state.valueKey]}</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">{self._selectItemOnOptionClick.bind(null,</span> <span class="hljs-attribute">dataOption</span>[<span class="hljs-attribute">self.state.valueKey</span>])} <span class="hljs-attribute">role</span>=<span class="hljs-value">"menuitem"</span>&gt;</span>
          {customOptionMarkup}
        <span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>);
    });
  },

</span></pre></div></div>

        </li>


        <li id="section-83">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>render option list-items based on the default template</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _mapDataToDefaultTemplateMarkup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, indexStart)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">return</span> _.map(data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dataOption, index)</span> {</span>
      index = indexStart + index;
      <span class="hljs-keyword">var</span> itemKey = <span class="hljs-string">"drop_li_"</span> + dataOption[self.state.valueKey],
          indexRef = <span class="hljs-string">'option_'</span> + index,
          classes = classNames(<span class="hljs-string">'r-ss-dropdown-option'</span>, {
            <span class="hljs-string">'r-ss-selected'</span>: self._isCurrentlySelected(dataOption)
          });
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">{indexRef}</span> <span class="hljs-attribute">tabIndex</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">data-option-index</span>=<span class="hljs-value">{index}</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">{classes}</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">{itemKey}</span> <span class="hljs-attribute">data-option-value</span>=<span class="hljs-value">{dataOption[self.state.valueKey]}</span> <span class="hljs-attribute">onClick</span>=<span class="hljs-value">{self._selectItemOnOptionClick.bind(null,</span> <span class="hljs-attribute">dataOption</span>[<span class="hljs-attribute">self.state.valueKey</span>])} <span class="hljs-attribute">role</span>=<span class="hljs-value">"menuitem"</span>&gt;</span>
          {dataOption[self.state.labelKey]}
        <span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>);
    });
  },

</span></pre></div></div>

        </li>


        <li id="section-84">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>determines next focusedId prior to updateFocusedId call</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _moveFocusDown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> nextId;
    <span class="hljs-keyword">if</span> (_.isUndefined(<span class="hljs-keyword">this</span>.state.focusedId)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.searchable) {
        nextId = <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID;
      } <span class="hljs-keyword">else</span> {
        nextId = <span class="hljs-number">0</span>;
      }
    } <span class="hljs-keyword">else</span> {
      nextId = (<span class="hljs-keyword">this</span>.lastOptionId === <span class="hljs-keyword">this</span>.state.focusedId) ? <span class="hljs-keyword">this</span>.lastOptionId : <span class="hljs-keyword">this</span>.state.focusedId + <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">this</span>._updateFocusedId(nextId);
  },</pre></div></div>

        </li>


        <li id="section-85">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>determines previous focusedId prior to updateFocusedId call</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _moveFocusUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> previousId;

    <span class="hljs-keyword">if</span> (!_.isUndefined(<span class="hljs-keyword">this</span>.state.focusedId) &amp;&amp; (<span class="hljs-keyword">this</span>.state.focusedId !== <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.focusedId === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.searchable) {
          previousId = <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID;
        }
      } <span class="hljs-keyword">else</span> {
        previousId = <span class="hljs-keyword">this</span>.state.focusedId - <span class="hljs-number">1</span>;
      }
    }
    <span class="hljs-keyword">this</span>._updateFocusedId(previousId);
  },</pre></div></div>

        </li>


        <li id="section-86">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>return boolean to determine if we have already received data from the <strong>ajaxDataSource</strong> function</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _needsAjaxFetch: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> !_.isArray(<span class="hljs-keyword">this</span>.state.data) &amp;&amp; <span class="hljs-keyword">this</span>.props.ajaxDataSource;
  },</pre></div></div>

        </li>


        <li id="section-87">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>down key handler</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onDownKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>._openedOnKeypress();
    <span class="hljs-keyword">this</span>._moveFocusDown();
  },</pre></div></div>

        </li>


        <li id="section-88">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>end key handler</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onEndKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.lastOptionId) {
      <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-keyword">this</span>.state.lastOptionId);
    }
  },</pre></div></div>

        </li>


        <li id="section-89">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>enter key handler,
opens control when closed,
otherwise makes selection</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onEnterKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._openedOnKeypress()) {

      <span class="hljs-keyword">var</span> focusedOptionKey = <span class="hljs-keyword">this</span>._getFocusedOptionKey();

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs[focusedOptionKey]) {
        <span class="hljs-keyword">var</span> optionValue = <span class="hljs-keyword">this</span>.refs[focusedOptionKey].props[<span class="hljs-string">'data-option-value'</span>],
            isAdditionalOption = (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; (event.ctrlKey || event.metaKey));
        <span class="hljs-keyword">this</span>._selectItemByValues(optionValue, isAdditionalOption);
      }
    }
  },</pre></div></div>

        </li>


        <li id="section-90">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>escape key handler, closes the dropdown</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onEscKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>._closeOnKeypress();
  },</pre></div></div>

        </li>


        <li id="section-91">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>home key handler, focuses the controls main element</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onHomeKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>._updateFocusedId(<span class="hljs-number">0</span>);
  },</pre></div></div>

        </li>


        <li id="section-92">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>mouse move handler used when <strong>pageFetch</strong> is set, will fire the pageFetch function if user has srolled sufficiently far in the dropdown</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onMouseMove: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>

        </li>


        <li id="section-93">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>do not fetch page if searching or already loading data</p>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.refs.loader || <span class="hljs-keyword">this</span>.state.searchString || <span class="hljs-keyword">this</span>.state.pageFetchingComplete) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">var</span> wrap = <span class="hljs-keyword">this</span>.refs.scrollWrap.getDOMNode();

    <span class="hljs-keyword">if</span> ((wrap.scrollTop + wrap.offsetHeight) &gt;= wrap.scrollHeight) {
      <span class="hljs-keyword">this</span>.setState({
        isFetchingPage: <span class="hljs-literal">true</span>
      }, <span class="hljs-keyword">this</span>._fetchNextPage);
    }
  },</pre></div></div>

        </li>


        <li id="section-94">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>up key handler</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _onUpKey: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>._moveFocusUp();
  },</pre></div></div>

        </li>


        <li id="section-95">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>open the dropdown, return true if opening,
return value (boolean) is used in keyUp handlers to alternate behaviors based on open state</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _openedOnKeypress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.state.isOpen) {
      <span class="hljs-keyword">this</span>.toggleDropdown();
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },</pre></div></div>

        </li>


        <li id="section-96">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>remove a selected tag on keyUp</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _removeTagKeyPress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value, event)</span> {</span>
    event.preventDefault();
    event.stopPropagation();

    <span class="hljs-keyword">var</span> isEnterKey = event.which === <span class="hljs-keyword">this</span>.keymap.enter,
        isSpaceKey = event.which === <span class="hljs-keyword">this</span>.keymap.space;

    <span class="hljs-keyword">if</span> (isEnterKey || isSpaceKey) {
      <span class="hljs-keyword">this</span>._removeTagClick(value, event); <span class="hljs-comment">// delegate to click handler</span>
    }
  },</pre></div></div>

        </li>


        <li id="section-97">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>remove a selected tag on click</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _removeTagClick: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value, event)</span> {</span>
    event.preventDefault();
    event.stopPropagation();

    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.setState({
      value: _.reject(<span class="hljs-keyword">this</span>.state.value, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tag)</span> {</span>
              <span class="hljs-keyword">return</span> tag[self.state.valueKey] === value[self.state.valueKey];
            })
    });
  },</pre></div></div>

        </li>


        <li id="section-98">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>used by shift-selection functions, determine a range of options to select from clicked item backwards to closest r-ss-selected</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _selectAllFromOptionRefToLastSelected: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(optionIndex)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
        optionsToSelect = [],
        valuesToSelect;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = (optionIndex); i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">var</span> refString = <span class="hljs-string">'option_'</span> + i,
          option = <span class="hljs-keyword">this</span>.refs[refString];

      <span class="hljs-keyword">if</span> (option.props.className.match(<span class="hljs-regexp">/r-ss-selected/</span>)) {
        <span class="hljs-keyword">break</span>;
      } <span class="hljs-keyword">else</span> {
        optionsToSelect.push(option.props[<span class="hljs-string">'data-option-value'</span>]);
      }

    }

    valuesToSelect = _.reject(<span class="hljs-keyword">this</span>.state.data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>
                       <span class="hljs-keyword">return</span> optionsToSelect.indexOf(item[self.state.valueKey]) === -<span class="hljs-number">1</span>;
                     });

    <span class="hljs-keyword">this</span>._selectItemByValues(valuesToSelect);
  },</pre></div></div>

        </li>


        <li id="section-99">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>handle selection of an option or array of options
close dropdown on state callback if not selecting additional options in a multi-select control</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _selectItemByValues: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value, isAdditionalOption)</span> {</span>
   <span class="hljs-keyword">var</span> objectValues = <span class="hljs-keyword">this</span>._findArrayOfOptionDataObjectsByValue(value);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.props.tags || (isAdditionalOption &amp;&amp; <span class="hljs-keyword">this</span>.state.value)) {
      objectValues = <span class="hljs-keyword">this</span>.state.value.concat(objectValues);
    }

    <span class="hljs-keyword">var</span> outputValue = <span class="hljs-keyword">this</span>._isMultiSelect() ? objectValues : _.first(objectValues);
    <span class="hljs-keyword">this</span>.props.onChange(outputValue);

    <span class="hljs-keyword">if</span> (isAdditionalOption) {
      <span class="hljs-keyword">this</span>.setState({
        value: objectValues
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.setState({
        value: objectValues
      }, <span class="hljs-keyword">this</span>._closeOnKeypress);
    }
  },</pre></div></div>

        </li>


        <li id="section-100">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>handle option-click (ctrl or meta keys) when selecting additional options in a multi-select control</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _selectItemOnOptionClick: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value, event)</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; event.shiftKey) {
      <span class="hljs-keyword">this</span>._handleShiftSelect(value, event);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> isAdditionalOption = (<span class="hljs-keyword">this</span>._isMultiSelect() &amp;&amp; (event.ctrlKey || event.metaKey));
    <span class="hljs-keyword">this</span>._selectItemByValues(value, isAdditionalOption);
  },</pre></div></div>

        </li>


        <li id="section-101">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>set focus id to SEARCH_FOCUS_ID constant value</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _setFocusIdToSearch: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.setState({
      focusedId: <span class="hljs-keyword">this</span>.SEARCH_FOCUS_ID
    });
  },</pre></div></div>

        </li>


        <li id="section-102">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>sets the current focused id,
or closes the dropdown if id is undefined</p>

            </div>

            <div class="content"><div class='highlight'><pre>  _updateFocusedId: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">this</span>.setState({
      focusedId: id
    }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (_.isUndefined(id)) {
        self._closeOnKeypress();
        <span class="hljs-keyword">return</span>;
      }
    });
  }

});

module.exports = ReactSuperSelect;</pre></div></div>

        </li>

    </ul>
  </div>
</body>
</html>
